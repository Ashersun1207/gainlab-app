const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dth5tUFx.js","assets/mosaic-86Umg_jF.js","assets/echarts-DW2iXprX.js"])))=>i.map(i=>d[i]);
import{f as m,_ as g}from"./index-ke4T4Ffm.js";import{j as n}from"./mosaic-86Umg_jF.js";import{a as t}from"./echarts-DW2iXprX.js";function v(e){return e>3?"#00c853":e>0?"#69f0ae":e<-3?"#d50000":e<0?"#ff5252":"#607d8b"}function p(e){return e>=1e12?`$${(e/1e12).toFixed(2)}T`:e>=1e9?`$${(e/1e9).toFixed(1)}B`:e>=1e6?`$${(e/1e6).toFixed(0)}M`:`$${e}`}function x(e){const c=e.map(a=>({name:a.name,value:a.value,itemStyle:{color:v(a.change)},change:a.change}));return{backgroundColor:"#1a1a2e",tooltip:{formatter:a=>{const r=a.data.change>=0?"+":"";return[`<b>${a.name}</b>`,`涨跌: ${r}${a.data.change.toFixed(2)}%`,`市值: ${p(a.data.value)}`].join("<br/>")}},series:[{type:"treemap",data:c,width:"100%",height:"100%",roam:!1,nodeClick:!1,breadcrumb:{show:!1},label:{show:!0,formatter:(a=>{const r=a.data.change>=0?"+":"";return`{name|${a.name}}
{change|${r}${a.data.change.toFixed(2)}%}`}),rich:{name:{fontSize:13,fontWeight:"bold",color:"#ffffff",lineHeight:20},change:{fontSize:12,color:"#ffffffcc",lineHeight:18}}},itemStyle:{borderColor:"#1a1a2e",borderWidth:2,gapWidth:2},emphasis:{itemStyle:{borderColor:"#ffffff",borderWidth:1}}}]}}const b=[{name:"BTC",value:12e11,change:2.5},{name:"ETH",value:35e10,change:-1.2},{name:"BNB",value:8e10,change:.8},{name:"SOL",value:75e9,change:4.3},{name:"XRP",value:6e10,change:-.5},{name:"USDC",value:45e9,change:.01},{name:"ADA",value:18e9,change:-2.1},{name:"AVAX",value:16e9,change:3.7},{name:"DOGE",value:15e9,change:6.2},{name:"TRX",value:14e9,change:1.1},{name:"DOT",value:11e9,change:-3.4},{name:"LINK",value:1e10,change:2},{name:"MATIC",value:85e8,change:-1.8},{name:"LTC",value:8e9,change:.3},{name:"SHIB",value:75e8,change:5.1},{name:"UNI",value:6e9,change:-.9},{name:"ATOM",value:55e8,change:1.5},{name:"XLM",value:48e8,change:-.4},{name:"ICP",value:42e8,change:7.3},{name:"FIL",value:39e8,change:-2.6}],$=t.lazy(()=>g(()=>import("./index-Dth5tUFx.js"),__vite__mapDeps([0,1,2])).then(e=>({default:e.EChartsWidget})));function j({market:e}){const[c,s]=t.useState(b),[i,a]=t.useState(!1),[r,f]=t.useState(null),o=t.useRef(!1),u=t.useCallback(async()=>{o.current=!1,a(!0),f(null);try{const l=await m(e);!o.current&&l.length>0&&s(l)}catch(l){if(!o.current){const d=l instanceof Error?l.message:"Failed to fetch screener";f(d)}}finally{o.current||a(!1)}},[e]);t.useEffect(()=>(u(),()=>{o.current=!0}),[u]);const h=x(c);return n.jsxs("div",{className:"w-full h-full relative",children:[i&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#0d0d20]/80 z-10",children:n.jsx("span",{className:"text-[#8888aa] text-sm",children:"加载中..."})}),r&&n.jsxs("div",{className:"absolute top-1 right-2 z-10 text-[10px] text-[#ef4444] bg-[#1a1a2e] px-2 py-0.5 rounded",children:[r,"（使用默认数据）"]}),n.jsx(t.Suspense,{fallback:n.jsx("div",{className:"w-full h-full bg-[#0d0d20]"}),children:n.jsx($,{option:h,style:{height:"100%"}})})]})}export{j as HeatmapWidget};
