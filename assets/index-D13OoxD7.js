const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CGvyI1KM.js","assets/mosaic-86Umg_jF.js","assets/echarts-DW2iXprX.js"])))=>i.map(i=>d[i]);
import{f as v,_ as p}from"./index-DmXHg8Ah.js";import{j as r}from"./mosaic-86Umg_jF.js";import{a as t}from"./echarts-DW2iXprX.js";function x(e){return e>3?"#00c853":e>0?"#69f0ae":e<-3?"#d50000":e<0?"#ff5252":"#607d8b"}function b(e){return e>=1e12?`$${(e/1e12).toFixed(2)}T`:e>=1e9?`$${(e/1e9).toFixed(1)}B`:e>=1e6?`$${(e/1e6).toFixed(0)}M`:`$${e}`}function $(e){const c=e.map(a=>({name:a.name,value:a.value,itemStyle:{color:x(a.change)},change:a.change}));return{backgroundColor:"#1a1a2e",tooltip:{formatter:a=>{const o=a.data.change>=0?"+":"";return[`<b>${a.name}</b>`,`涨跌: ${o}${a.data.change.toFixed(2)}%`,`市值: ${b(a.data.value)}`].join("<br/>")}},series:[{type:"treemap",data:c,width:"100%",height:"100%",roam:!1,nodeClick:!1,breadcrumb:{show:!1},label:{show:!0,formatter:(a=>{const o=a.data.change>=0?"+":"";return`{name|${a.name}}
{change|${o}${a.data.change.toFixed(2)}%}`}),rich:{name:{fontSize:13,fontWeight:"bold",color:"#ffffff",lineHeight:20},change:{fontSize:12,color:"#ffffffcc",lineHeight:18}}},itemStyle:{borderColor:"#1a1a2e",borderWidth:2,gapWidth:2},emphasis:{itemStyle:{borderColor:"#ffffff",borderWidth:1}}}]}}const E=[{name:"BTC",value:12e11,change:2.5},{name:"ETH",value:35e10,change:-1.2},{name:"BNB",value:8e10,change:.8},{name:"SOL",value:75e9,change:4.3},{name:"XRP",value:6e10,change:-.5},{name:"USDC",value:45e9,change:.01},{name:"ADA",value:18e9,change:-2.1},{name:"AVAX",value:16e9,change:3.7},{name:"DOGE",value:15e9,change:6.2},{name:"TRX",value:14e9,change:1.1},{name:"DOT",value:11e9,change:-3.4},{name:"LINK",value:1e10,change:2},{name:"MATIC",value:85e8,change:-1.8},{name:"LTC",value:8e9,change:.3},{name:"SHIB",value:75e8,change:5.1},{name:"UNI",value:6e9,change:-.9},{name:"ATOM",value:55e8,change:1.5},{name:"XLM",value:48e8,change:-.4},{name:"ICP",value:42e8,change:7.3},{name:"FIL",value:39e8,change:-2.6}],S=t.lazy(()=>p(()=>import("./index-CGvyI1KM.js"),__vite__mapDeps([0,1,2])).then(e=>({default:e.EChartsWidget})));function D({market:e,onCellClick:c}){const[i,f]=t.useState(E),[a,o]=t.useState(!1),[u,h]=t.useState(null),s=t.useRef(!1),d=t.useCallback(async()=>{s.current=!1,o(!0),h(null);try{const n=await v(e);!s.current&&n.length>0&&f(n)}catch(n){if(!s.current){const l=n instanceof Error?n.message:"Failed to fetch screener";h(l)}}finally{s.current||o(!1)}},[e]);t.useEffect(()=>(d(),()=>{s.current=!0}),[d]);const m=$(i),g=t.useMemo(()=>{if(c)return{click:n=>{const l=n.name;l&&c(l)}}},[c]);return r.jsxs("div",{className:"w-full h-full relative",children:[a&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#0d0d20]/80 z-10",children:r.jsx("span",{className:"text-[#8888aa] text-sm",children:"加载中..."})}),u&&r.jsxs("div",{className:"absolute top-1 right-2 z-10 text-[10px] text-[#ef4444] bg-[#1a1a2e] px-2 py-0.5 rounded",children:[u,"（使用默认数据）"]}),r.jsx(t.Suspense,{fallback:r.jsx("div",{className:"w-full h-full bg-[#0d0d20]"}),children:r.jsx(S,{option:m,style:{height:"100%"},onEvents:g})})]})}export{D as HeatmapWidget};
