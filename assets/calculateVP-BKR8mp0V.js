function M(n,t=50){if(n.length===0)return{levels:[],poc:0,vah:0,val:0};const r=n.flatMap(o=>[o.high,o.low]),a=Math.min(...r),h=(Math.max(...r)-a)/t||1,e=Array.from({length:t},(o,m)=>({price:a+h*(m+.5),volume:0,buyVolume:0,sellVolume:0}));for(const o of n){const m=(o.high+o.low)/2,u=Math.min(Math.floor((m-a)/h),t-1);if(u>=0&&u<t){const i=o.volume??0;e[u].volume+=i,o.close>=o.open?e[u].buyVolume+=i:e[u].sellVolume+=i}}const f=Math.max(...e.map(o=>o.volume)),s=e.find(o=>o.volume===f)??e[0],p=e.indexOf(s),x=e.reduce((o,m)=>o+m.volume,0);let v=s.volume,l=p,c=p;for(;v<x*.7&&(l>0||c<t-1);){const o=l>0?e[l-1].volume:0,m=c<t-1?e[c+1].volume:0;o>=m&&l>0?(l--,v+=e[l].volume):c<t-1?(c++,v+=e[c].volume):(l--,v+=e[l].volume)}return{levels:e,poc:s.price,vah:e[c].price,val:e[l].price}}export{M as c};
