import{j as s}from"./mosaic-86Umg_jF.js";import{a as r}from"./echarts-DW2iXprX.js";function c(e){const l=[];for(let t=3;t<e.length;t++){const n=Math.abs(e[t].close-e[t].open),i=(Math.abs(e[t-1].close-e[t-1].open)+Math.abs(e[t-2].close-e[t-2].open)+Math.abs(e[t-3].close-e[t-3].open))/3;i>0&&n>i*1.5&&l.push({timestamp:e[t].timestamp,type:"wrb",direction:e[t].close>=e[t].open?"bullish":"bearish",score:Math.min(n/i,5)})}return l}function a(e){const l=new Date(e);return`${l.getMonth()+1}/${l.getDate()} ${l.getHours().toString().padStart(2,"0")}:${l.getMinutes().toString().padStart(2,"0")}`}function d({klineData:e}){const l=r.useMemo(()=>c(e),[e]);if(e.length===0)return s.jsx("div",{className:"w-full h-full flex items-center justify-center text-[#6666aa] text-sm",children:"请先选择资产以检测 WRB 信号"});const t=l.filter(i=>i.direction==="bullish").length,n=l.filter(i=>i.direction==="bearish").length;return s.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden bg-[#0d0d20]",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-[#1e1e3a] flex-shrink-0",children:[s.jsx("div",{className:"text-sm text-[#d0d0f0] font-medium",children:"WRB 信号检测"}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px]",children:[s.jsxs("span",{className:"text-[#22c55e]",children:["▲ 多 ",t]}),s.jsxs("span",{className:"text-[#ef4444]",children:["▼ 空 ",n]}),s.jsxs("span",{className:"text-[#8888aa]",children:["共 ",l.length]})]})]}),s.jsx("div",{className:"px-3 py-1 text-[10px] text-[#4a4a7a] border-b border-[#1e1e3a] flex-shrink-0",children:"body > 前3根均值 × 1.5 = WRB 信号（简化版，非完整 WRB Analysis）"}),s.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-2",children:l.length===0?s.jsx("div",{className:"text-[#6666aa] text-sm text-center pt-8",children:"未检测到 WRB 信号"}):s.jsx("div",{className:"flex flex-col gap-1",children:l.slice().reverse().slice(0,50).map(i=>s.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 rounded bg-[#13132a] text-xs",children:[s.jsx("span",{className:"text-[#aaaacc]",children:a(i.timestamp)}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:i.direction==="bullish"?"text-[#22c55e]":"text-[#ef4444]",children:i.direction==="bullish"?"▲ 多":"▼ 空"}),s.jsxs("span",{className:"text-[#8888aa]",children:[i.score.toFixed(1),"×"]})]})]},i.timestamp))})})]})}export{d as WRBWidget};
